{{ $pageName := path.Base .Page.RelPermalink}}
{{ $subDir := .Get "file" | default ""}}
{{ $chunkIdx := .Get "chunk" | default -1 }}
{{ $fileName := cond (eq $chunkIdx -1) ("full.chpl") (print "Chunk_" $chunkIdx ".chpl") }}
{{ highlight ( path.Join "./static/blog-src/" $pageName "/" $subDir "/" $fileName  | readFile | safeHTML ) "chapel" }}
